#!/bin/bash

mkdir mysql
mkdir data

NEWFLAG="-pthread -lssl -lcrypto -lcrypto++"

CC=clang CXX=clang++ CFLAGS=$NEWFLAG CXXFLAGS=$NEWFLAG cmake -DCMAKE_INSTALL_PREFIX=./mysql -DMYSQL_DATADIR=./data -DDEFAULT_CHARSET=utf8  -DDEFAULT_COLLATION=utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING=all -DWITH_DEBUG=0 -DWITH_SSL=yes -DWITH_READLINE=1 -DENABLED_LOCAL_INFILE=1 -DWITHOUT_PARTITION_STORAGE_ENGINE=0 .. && make -j4 && make install

./mysql/scripts/mysql_install_db --user=root --basedir=./mysql --datadir=./data
